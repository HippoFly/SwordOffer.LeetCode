package com.so.leetcode;

import java.util.Stack;

/**
 *
 * 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·
 *
 * @author FlyHippo
 * @version 1.0
 * @created 2025-05-21 16:15
 * @tag
 * @link <a href=""></a>
 **/
public class Q32_LongestValidParentheses {
    /**
     * 2. ä»å·¦å¾€å³æ‰«æèƒ½è§£å†³ä¸€åŠé—®é¢˜
     *
     * æˆ‘ä»¬ç»´æŠ¤ä¸¤ä¸ªè®¡æ•°å™¨ï¼šleft = å·¦æ‹¬å·æ•°ï¼Œright = å³æ‹¬å·æ•°ã€‚
     * å¦‚æœ left == right â†’ å½“å‰è¿™ä¸€æ®µæ˜¯åˆæ³•çš„ã€‚
     * å¦‚æœ right > left â†’ æå‰ä¸åˆæ³•ï¼ˆå³æ‹¬å·å¤ªå¤šï¼‰ï¼Œæ¸…é›¶é‡æ–°å¼€å§‹ã€‚
     * ğŸ‘‰ è¿™æ ·èƒ½æ‰¾åˆ°æ‰€æœ‰â€œå³æ‹¬å·æ²¡æœ‰è¶…æ ‡â€çš„æœ€é•¿ä¸²ã€‚
     * âš ï¸ ä½†è¿˜æœ‰ä¸€ç§æƒ…å†µæ¼æ‰ï¼šå·¦æ‹¬å·å¤šä½™ã€‚
     * ä¾‹å­ "(()"ï¼š
     * ä»å·¦åˆ°å³ï¼šæœ€å left=2, right=1 â†’ æ²¡æ³•æ›´æ–°ã€‚
     * ä½†å®é™…ç­”æ¡ˆæ˜¯ 2ï¼ˆæœ€åä¸¤ä¸ªæ‹¬å· ()ï¼‰ã€‚
     *
     *  3. å†æ¥ä¸€éä»å³å¾€å·¦
     *
     * ä»å³å¾€å·¦æ‰«ææ—¶ï¼ŒåŒæ ·ç»´æŠ¤ left å’Œ rightï¼Œä½†é€»è¾‘å¯¹ç§°ï¼š
     * å¦‚æœ left == right â†’ æœ‰æ•ˆã€‚
     * å¦‚æœ left > right â†’ å·¦æ‹¬å·å¤ªå¤šï¼ˆå› ä¸ºæˆ‘ä»¬æ˜¯ä»å³å¾€å·¦çœ‹ï¼‰ï¼Œæ¸…é›¶ã€‚
     * ğŸ‘‰ è¿™æ ·å°±èƒ½è¦†ç›–æ‰â€œå·¦æ‹¬å·å¤šä½™â€çš„æƒ…å†µã€‚
     * åœ¨ "(()" é‡Œï¼Œä»å³å¾€å·¦æ—¶ï¼Œèƒ½æ‰¾åˆ°é•¿åº¦ä¸º 2 çš„æœ‰æ•ˆä¸²ã€‚
     *
     *  4. ä¸ºä»€ä¹ˆâ€œä¸¤éç»“åˆâ€å°±è¦†ç›–æ‰€æœ‰æƒ…å†µï¼Ÿ
     *
     * ç¬¬ä¸€éï¼ˆå·¦â†’å³ï¼‰ï¼šèƒ½æ­£ç¡®æ‰¾å‡ºæ‰€æœ‰å³æ‹¬å·ä¸è¿‡é‡çš„æœ€é•¿åˆæ³•æ®µã€‚
     * ç¬¬äºŒéï¼ˆå³â†’å·¦ï¼‰ï¼šèƒ½æ­£ç¡®æ‰¾å‡ºæ‰€æœ‰å·¦æ‹¬å·ä¸è¿‡é‡çš„æœ€é•¿åˆæ³•æ®µã€‚
     * äºŒè€…ç»“åˆï¼Œåˆšå¥½æ¶µç›–äº†æ‰€æœ‰åˆæ³•å­ä¸²ã€‚
     *
     * @param s
     * @return
     */
    public int longestValidParentheses(String s) {
        int maxLen = 0, left = 0, right = 0;

        // å·¦->å³
        for (int i = 0; i < s.length(); i++) {
            if (s.charAt(i) == '(') left++; else right++;
            if (left == right) maxLen = Math.max(maxLen, 2 * right);
            else if (right > left) left = right = 0;
        }

        // å³->å·¦
        left = right = 0;
        for (int i = s.length() - 1; i >= 0; i--) {
            if (s.charAt(i) == '(') left++; else right++;
            if (left == right) maxLen = Math.max(maxLen, 2 * left);
            else if (left > right) left = right = 0;
        }
        return maxLen;
    }

}
